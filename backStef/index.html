<!DOCTYPE html>
<html>
<title>Title</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<body>

  <div class="w3-card-4">
    <div class="w3-container w3-brown">
      <h2>Input Locations</h2>
    </div>
    <form class="w3-container w3-half">
      <p>
        <label class="w3-text-brown"><b>Location Name</b></label>
        <input id="name" class="w3-input w3-border w3-sand" type="text"></p>
      <p>
        <label class="w3-text-brown"><b>Longitud</b></label>
        <input id="lat" class="w3-input w3-border w3-sand" type="number"></p>
      <p>
        <p>
          <label class="w3-text-brown"><b>Latitude</b></label>
          <input id="lon" class="w3-input w3-border w3-sand" type="number"></p>
        <p>
          <label class="w3-text-brown"><b>Media url link</b></label>
          <input id="link" class="w3-input w3-border w3-sand" type="text"></p>
        <p>
          <button id="insert" class="w3-btn w3-brown" type="button">Save Location</button>
        </p>
        <p>
          <button id="delete" class="w3-btn w3-red" type="button">Delete All</button>
        </p>
        <p>
          <button id="dump" class="w3-btn w3-blue" type="button">Dump in the 3 Default Locations</button>
        </p>
    </form>
    <div id="locations" class="w3-container w3-sand w3-half">

    </div>
  </div>

</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
  $(document).ready(function () {
    $("#delete").click(function () {
      $.ajax({
        url: '/location',
        method: 'DELETE'
      })
        .done(function (data) {
          console.log(data);
          reloadData();
        });
    });

    $("#dump").click(function () {
      $.ajax({
        url: '/dump',
        method: 'POST'
      })
        .done(function (data) {
          console.log(data);
          reloadData();
        });
    });

    $("#insert").click(function () {
      var data = {};
      data.name = $("#name").val();
      data.lat = $("#lat").val();
      data.lon = $("#lon").val();
      data.link = $("#link").val();
      console.log(data);
      
      $.ajax({
        url: '/location',
        method: 'POST',
        data: data
      })
        .done(function (data) {
          console.log(data);
          reloadData();
        });
    });
    
    function reloadData(){
      $.ajax({
        url: '/location',
        method: 'GET'
      })
        .done(function (data) {
          console.log(data);
          var myArr = JSON.parse(data);
          $("#locations").text(myArr);
        });
    }
    reloadData();
  });

</script>

</html>